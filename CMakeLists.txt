cmake_minimum_required(VERSION 2.6)
project(TimeSync)
set(CMAKE_CXX_FLAGS "-pthread -std=gnu++11")
add_subdirectory(FitGen)
add_subdirectory(j-pet-framework)
message(${Framework_INCLUDE_DIRS})
include_directories(${Framework_INCLUDE_DIRS})
include_directories(j-pet-framework)
add_definitions(${Framework_DEFINITIONS})
include_directories(${FITGEN_INC})
include_directories(${CMAKE_CURRENT_SOURCE_DIR})
include_directories(${ROOT_INCLUDE_DIR})

file(GLOB PRESELECT Preselection/*.cpp)
add_library(preselectionlib ${PRESELECT})
target_link_libraries(preselectionlib JPetFramework)
add_executable(preselect preselect.cpp)
target_link_libraries(preselect preselectionlib JPetFramework)

file(GLOB IO IO/*.cpp)
add_library(timesyncio ${IO})

file(GLOB CALC Calc/*.cpp)
add_library(timesynccalc ${CALC})

add_executable(fittest fittest.cpp)
target_link_libraries(fittest timesynccalc timesyncio FitGen gpwrap JPetFramework)

file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/config-files/large_barrel.json DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/config-files/conf_trb3.xml DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
